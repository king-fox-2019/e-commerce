{"remainingRequest":"/Users/aliftaufik/Documents/hacktiv8/hacktiv8-phase-2-repeat/portofolio/lazalopedia/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/aliftaufik/Documents/hacktiv8/hacktiv8-phase-2-repeat/portofolio/lazalopedia/client/src/views/Admin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/aliftaufik/Documents/hacktiv8/hacktiv8-phase-2-repeat/portofolio/lazalopedia/client/src/views/Admin.vue","mtime":1576408167913},{"path":"/Users/aliftaufik/Documents/hacktiv8/hacktiv8-phase-2-repeat/portofolio/lazalopedia/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/aliftaufik/Documents/hacktiv8/hacktiv8-phase-2-repeat/portofolio/lazalopedia/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/aliftaufik/Documents/hacktiv8/hacktiv8-phase-2-repeat/portofolio/lazalopedia/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/aliftaufik/Documents/hacktiv8/hacktiv8-phase-2-repeat/portofolio/lazalopedia/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBZG1pbk5hdkJhciBmcm9tICdAL2NvbXBvbmVudHMvQWRtaW5OYXZiYXInCgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgbmF2YmFyOiBBZG1pbk5hdkJhcgogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICBlbXB0eVVzZXJuYW1lOiBmYWxzZSwKICAgICAgZW1wdHlQYXNzd29yZDogZmFsc2UsCiAgICAgIHN1cGVyRXhpc3Q6IHRydWUKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICB2YWxpZGF0ZVVzZXJuYW1lKCkgewogICAgICByZXR1cm4gdGhpcy51c2VybmFtZSA/IC9eW2EtekEtWjAtOV8uXSskLy50ZXN0KHRoaXMudXNlcm5hbWUpIDogbnVsbAogICAgfSwKICAgIHZhbGlkYXRlUGFzc3dvcmQoKSB7CiAgICAgIHJldHVybiB0aGlzLnBhc3N3b3JkID8gdGhpcy5wYXNzd29yZC5sZW5ndGggPj0gNiA6IG51bGwKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIG9uUmVnaXN0ZXIoKSB7CiAgICAgIGxldCBpc1ZhbGlkID0gdHJ1ZQogICAgICBjb25zdCB7IHVzZXJuYW1lLCBwYXNzd29yZCB9ID0gdGhpcwogICAgICBpZiAoIXVzZXJuYW1lKSB7CiAgICAgICAgdGhpcy5lbXB0eVVzZXJuYW1lID0gdHJ1ZQogICAgICAgIGlzVmFsaWQgPSBmYWxzZQogICAgICB9CiAgICAgIGlmICghcGFzc3dvcmQpIHsKICAgICAgICB0aGlzLmVtcHR5UGFzc3dvcmQgPSB0cnVlCiAgICAgICAgaXNWYWxpZCA9IGZhbHNlCiAgICAgIH0KICAgICAgaWYgKGlzVmFsaWQgJiYgdGhpcy52YWxpZGF0ZVVzZXJuYW1lICYmIHRoaXMudmFsaWRhdGVQYXNzd29yZCkgewogICAgICAgIGNvbnN0IGxvYWRlciA9IHRoaXMuJGxvYWRpbmcuc2hvdygpCiAgICAgICAgdGhpcy4kc3RvcmUKICAgICAgICAgIC5kaXNwYXRjaCgnQURNSU5fUkVHSVNURVInLCB7CiAgICAgICAgICAgIHVzZXJuYW1lLAogICAgICAgICAgICBwYXNzd29yZAogICAgICAgICAgfSkKICAgICAgICAgIC50aGVuKCh7IGRhdGEgfSkgPT4gewogICAgICAgICAgICB0aGlzLiR0b2FzdGVkLnNob3coZGF0YS5tZXNzYWdlKQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSgnL2FkbWluL2Rhc2hib2FyZCcpCiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKCh7IHJlc3BvbnNlIH0pID0+IHsKICAgICAgICAgICAgdGhpcy5wYXNzd29yZCA9ICcnCiAgICAgICAgICAgIGlmIChyZXNwb25zZSkgewogICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSByZXNwb25zZS5kYXRhLm1lc3NhZ2UKICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEubWVzc2FnZS5mb3JFYWNoKG1zZyA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuc2hvdyhtc2csIHsgY2xhc3NOYW1lOiAnYmctZGFuZ2VyJyB9KQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5zaG93KHJlc3BvbnNlLmRhdGEubWVzc2FnZSwgewogICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdiZy1kYW5nZXInCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLiR0b2FzdGVkLnNob3coJ1NvbWV0aGluZyB3ZW50IHdyb25nJywgewogICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYmctZGFuZ2VyJwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuZmluYWxseSgoKSA9PiBsb2FkZXIuaGlkZSgpKQogICAgICB9CiAgICB9LAogICAgb25TaWduSW4oKSB7CiAgICAgIGxldCBpc1ZhbGlkID0gdHJ1ZQogICAgICBjb25zdCB7IHVzZXJuYW1lLCBwYXNzd29yZCB9ID0gdGhpcwogICAgICBpZiAoIXVzZXJuYW1lKSB7CiAgICAgICAgdGhpcy5lbXB0eVVzZXJuYW1lID0gdHJ1ZQogICAgICAgIGlzVmFsaWQgPSBmYWxzZQogICAgICB9CiAgICAgIGlmICghcGFzc3dvcmQpIHsKICAgICAgICB0aGlzLmVtcHR5UGFzc3dvcmQgPSB0cnVlCiAgICAgICAgaXNWYWxpZCA9IGZhbHNlCiAgICAgIH0KICAgICAgaWYgKGlzVmFsaWQpIHsKICAgICAgICBjb25zdCBsb2FkZXIgPSB0aGlzLiRsb2FkaW5nLnNob3coKQogICAgICAgIHRoaXMuJHN0b3JlCiAgICAgICAgICAuZGlzcGF0Y2goJ0FETUlOX1NJR05fSU4nLCB7CiAgICAgICAgICAgIHVzZXJuYW1lLAogICAgICAgICAgICBwYXNzd29yZAogICAgICAgICAgfSkKICAgICAgICAgIC50aGVuKCh7IGRhdGEgfSkgPT4gewogICAgICAgICAgICB0aGlzLiR0b2FzdGVkLnNob3coZGF0YS5tZXNzYWdlKQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSgnL2FkbWluL2Rhc2hib2FyZCcpCiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKCh7IHJlc3BvbnNlIH0pID0+IHsKICAgICAgICAgICAgdGhpcy5wYXNzd29yZCA9ICcnCiAgICAgICAgICAgIGlmIChyZXNwb25zZSkgewogICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSByZXNwb25zZS5kYXRhLm1lc3NhZ2UKICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEubWVzc2FnZS5mb3JFYWNoKG1zZyA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuc2hvdyhtc2csIHsgY2xhc3NOYW1lOiAnYmctZGFuZ2VyJyB9KQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5zaG93KHJlc3BvbnNlLmRhdGEubWVzc2FnZSwgewogICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdiZy1kYW5nZXInCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLiR0b2FzdGVkLnNob3coJ1NvbWV0aGluZyB3ZW50IHdyb25nJywgewogICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYmctZGFuZ2VyJwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuZmluYWxseSgoKSA9PiBsb2FkZXIuaGlkZSgpKQogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy4kc3RvcmUKICAgICAgLmRpc3BhdGNoKCdDSEVDS19TVVBFUl9BRE1JTicpCiAgICAgIC50aGVuKCgpID0+ICh0aGlzLnN1cGVyRXhpc3QgPSB0cnVlKSkKICAgICAgLmNhdGNoKCgpID0+ICh0aGlzLnN1cGVyRXhpc3QgPSBmYWxzZSkpCiAgICB0aGlzLiRzdG9yZQogICAgICAuZGlzcGF0Y2goJ0NIRUNLX1NFU1NJT04nKQogICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhdGggPT0gJy9hZG1pbicpCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSgnL2FkbWluL2Rhc2hib2FyZCcpCiAgICAgIH0pCiAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhdGggIT0gJy9hZG1pbicpIHRoaXMuJHJvdXRlci5yZXBsYWNlKCcvYWRtaW4nKQogICAgICB9KQogIH0KfQo="},{"version":3,"sources":["Admin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkJA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Admin.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <navbar></navbar>\n    <div v-if=\"$route.path == '/admin'\">\n      <div\n        class=\"container row mx-auto justify-content-center align-items-center\"\n        v-if=\"!superExist\"\n      >\n        <b-jumbotron\n          header-level=\"5\"\n          bg-variant=\"transparent\"\n          class=\"col-12 d-flex text-center pb-0\"\n          id=\"landing-page\"\n          fluid\n        >\n          <template v-slot:header>Register Super Admin</template>\n        </b-jumbotron>\n        <b-form\n          class=\"col-12 col-md-8 col-lg-6 col-xl-5 align-self-start\"\n          @submit.prevent=\"onRegister\"\n          novalidate\n        >\n          <b-form-group\n            label-for=\"username\"\n            description=\"Must only contains lowercase letters, numbers, dots and/or underscores.\"\n          >\n            <b-form-input\n              id=\"username\"\n              v-model.trim=\"username\"\n              type=\"text\"\n              placeholder=\"Username\"\n              :state=\"validateUsername\"\n              @focus=\"emptyUsername = false\"\n              required\n            ></b-form-input>\n            <b-popover\n              target=\"username\"\n              placement=\"right\"\n              variant=\"danger\"\n              content=\"Username cannot empty!\"\n              triggers\n              :show.sync=\"emptyUsername\"\n            ></b-popover>\n          </b-form-group>\n\n          <b-form-group\n            label-for=\"password\"\n            description=\"Must have at least 6 characters.\"\n          >\n            <b-form-input\n              id=\"password\"\n              v-model=\"password\"\n              type=\"password\"\n              placeholder=\"Password\"\n              :state=\"validatePassword\"\n              @focus=\"emptyPassword = false\"\n              required\n            ></b-form-input>\n            <b-popover\n              target=\"password\"\n              placement=\"right\"\n              variant=\"danger\"\n              content=\"Password cannot empty!\"\n              triggers\n              :show.sync=\"emptyPassword\"\n            ></b-popover>\n          </b-form-group>\n\n          <div\n            class=\"d-flex justify-content-between align-items-center flex-wrap\"\n          >\n            <b-button type=\"submit\" variant=\"primary\">Sign Up</b-button>\n          </div>\n        </b-form>\n      </div>\n\n      <div\n        class=\"container row mx-auto justify-content-center align-items-center\"\n        v-if=\"superExist\"\n      >\n        <b-jumbotron\n          header-level=\"5\"\n          bg-variant=\"transparent\"\n          class=\"col-12 d-flex text-center pb-0\"\n          id=\"landing-page\"\n          fluid\n        >\n          <template v-slot:header>Admin Sign In</template>\n        </b-jumbotron>\n        <b-form\n          class=\"col-12 col-md-8 col-lg-6 col-xl-5 align-self-start\"\n          @submit.prevent=\"onSignIn\"\n          novalidate\n        >\n          <b-form-group label-for=\"username\">\n            <b-form-input\n              id=\"username\"\n              v-model.trim=\"username\"\n              type=\"text\"\n              placeholder=\"Username\"\n              @focus=\"emptyUsername = false\"\n              required\n            ></b-form-input>\n            <b-popover\n              target=\"username\"\n              placement=\"right\"\n              variant=\"danger\"\n              content=\"Username cannot empty!\"\n              triggers\n              :show.sync=\"emptyUsername\"\n            ></b-popover>\n          </b-form-group>\n\n          <b-form-group label-for=\"password\">\n            <b-form-input\n              id=\"password\"\n              v-model=\"password\"\n              type=\"password\"\n              placeholder=\"Password\"\n              @focus=\"emptyPassword = false\"\n              required\n            ></b-form-input>\n            <b-popover\n              target=\"password\"\n              placement=\"right\"\n              variant=\"danger\"\n              content=\"Password cannot empty!\"\n              triggers\n              :show.sync=\"emptyPassword\"\n            ></b-popover>\n          </b-form-group>\n\n          <div\n            class=\"d-flex justify-content-between align-items-center flex-wrap\"\n          >\n            <b-button type=\"submit\" variant=\"primary\">Sign In</b-button>\n          </div>\n        </b-form>\n      </div>\n    </div>\n\n    <router-view></router-view>\n  </div>\n</template>\n\n<script>\nimport AdminNavBar from '@/components/AdminNavbar'\n\nexport default {\n  components: {\n    navbar: AdminNavBar\n  },\n  data() {\n    return {\n      username: '',\n      password: '',\n      emptyUsername: false,\n      emptyPassword: false,\n      superExist: true\n    }\n  },\n  computed: {\n    validateUsername() {\n      return this.username ? /^[a-zA-Z0-9_.]+$/.test(this.username) : null\n    },\n    validatePassword() {\n      return this.password ? this.password.length >= 6 : null\n    }\n  },\n  methods: {\n    onRegister() {\n      let isValid = true\n      const { username, password } = this\n      if (!username) {\n        this.emptyUsername = true\n        isValid = false\n      }\n      if (!password) {\n        this.emptyPassword = true\n        isValid = false\n      }\n      if (isValid && this.validateUsername && this.validatePassword) {\n        const loader = this.$loading.show()\n        this.$store\n          .dispatch('ADMIN_REGISTER', {\n            username,\n            password\n          })\n          .then(({ data }) => {\n            this.$toasted.show(data.message)\n            this.$router.replace('/admin/dashboard')\n          })\n          .catch(({ response }) => {\n            this.password = ''\n            if (response) {\n              const message = response.data.message\n              if (typeof message != 'string') {\n                response.data.message.forEach(msg => {\n                  this.$toasted.show(msg, { className: 'bg-danger' })\n                })\n              } else {\n                this.$toasted.show(response.data.message, {\n                  className: 'bg-danger'\n                })\n              }\n            } else {\n              this.$toasted.show('Something went wrong', {\n                className: 'bg-danger'\n              })\n            }\n          })\n          .finally(() => loader.hide())\n      }\n    },\n    onSignIn() {\n      let isValid = true\n      const { username, password } = this\n      if (!username) {\n        this.emptyUsername = true\n        isValid = false\n      }\n      if (!password) {\n        this.emptyPassword = true\n        isValid = false\n      }\n      if (isValid) {\n        const loader = this.$loading.show()\n        this.$store\n          .dispatch('ADMIN_SIGN_IN', {\n            username,\n            password\n          })\n          .then(({ data }) => {\n            this.$toasted.show(data.message)\n            this.$router.replace('/admin/dashboard')\n          })\n          .catch(({ response }) => {\n            this.password = ''\n            if (response) {\n              const message = response.data.message\n              if (typeof message != 'string') {\n                response.data.message.forEach(msg => {\n                  this.$toasted.show(msg, { className: 'bg-danger' })\n                })\n              } else {\n                this.$toasted.show(response.data.message, {\n                  className: 'bg-danger'\n                })\n              }\n            } else {\n              this.$toasted.show('Something went wrong', {\n                className: 'bg-danger'\n              })\n            }\n          })\n          .finally(() => loader.hide())\n      }\n    }\n  },\n  created() {\n    this.$store\n      .dispatch('CHECK_SUPER_ADMIN')\n      .then(() => (this.superExist = true))\n      .catch(() => (this.superExist = false))\n    this.$store\n      .dispatch('CHECK_SESSION')\n      .then(() => {\n        if (this.$route.path == '/admin')\n          this.$router.replace('/admin/dashboard')\n      })\n      .catch(() => {\n        if (this.$route.path != '/admin') this.$router.replace('/admin')\n      })\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  width: 100%;\n  padding-top: 3.7rem;\n}\n</style>\n"]}]}