{"remainingRequest":"/Users/aliftaufik/Documents/hacktiv8/hacktiv8-phase-2-repeat/portofolio/lazalopedia/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/aliftaufik/Documents/hacktiv8/hacktiv8-phase-2-repeat/portofolio/lazalopedia/client/src/views/TransactionDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/aliftaufik/Documents/hacktiv8/hacktiv8-phase-2-repeat/portofolio/lazalopedia/client/src/views/TransactionDetail.vue","mtime":1576432791341},{"path":"/Users/aliftaufik/Documents/hacktiv8/hacktiv8-phase-2-repeat/portofolio/lazalopedia/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/aliftaufik/Documents/hacktiv8/hacktiv8-phase-2-repeat/portofolio/lazalopedia/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/aliftaufik/Documents/hacktiv8/hacktiv8-phase-2-repeat/portofolio/lazalopedia/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/aliftaufik/Documents/hacktiv8/hacktiv8-phase-2-repeat/portofolio/lazalopedia/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogWydpZCddLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0cmFuc2FjdGlvbjogbnVsbAogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZGVsaXZlcmVkKCkgewogICAgICBjb25zdCBsb2FkZXIgPSB0aGlzLiRsb2FkaW5nLnNob3coKQogICAgICB0aGlzLiRzdG9yZQogICAgICAgIC5kaXNwYXRjaCgnQ09ORklSTV9ERUxJVkVSRUQnLCB0aGlzLnRyYW5zYWN0aW9uLl9pZCkKICAgICAgICAudGhlbigoeyBkYXRhIH0pID0+IHsKICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuc2hvdyhkYXRhLm1lc3NhZ2UpCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3RyYW5zYWN0aW9ucycpCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKHsgcmVzcG9uc2UgfSkgPT4gewogICAgICAgICAgdGhpcy5wYXNzd29yZCA9ICcnCiAgICAgICAgICBpZiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHJlc3BvbnNlLmRhdGEubWVzc2FnZQogICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLm1lc3NhZ2UuZm9yRWFjaChtc2cgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5zaG93KG1zZywgeyBjbGFzc05hbWU6ICdiZy1kYW5nZXInIH0pCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLiR0b2FzdGVkLnNob3cocmVzcG9uc2UuZGF0YS5tZXNzYWdlLCB7CiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdiZy1kYW5nZXInCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5zaG93KCdTb21ldGhpbmcgd2VudCB3cm9uZycsIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6ICdiZy1kYW5nZXInCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuZmluYWxseSgoKSA9PiBsb2FkZXIuaGlkZSgpKQogICAgfSwKICAgIGNhbmNlbCgpIHsKICAgICAgY29uc3QgbG9hZGVyID0gdGhpcy4kbG9hZGluZy5zaG93KCkKICAgICAgdGhpcy4kc3RvcmUKICAgICAgICAuZGlzcGF0Y2goJ0NBTkNFTF9UUkFOU0FDVElPTicsIHRoaXMudHJhbnNhY3Rpb24uX2lkKQogICAgICAgIC50aGVuKCh7IGRhdGEgfSkgPT4gewogICAgICAgICAgdGhpcy4kdG9hc3RlZC5zaG93KGRhdGEubWVzc2FnZSkKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvdHJhbnNhY3Rpb25zJykKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoeyByZXNwb25zZSB9KSA9PiB7CiAgICAgICAgICB0aGlzLnBhc3N3b3JkID0gJycKICAgICAgICAgIGlmIChyZXNwb25zZSkgewogICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlCiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPSAnc3RyaW5nJykgewogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEubWVzc2FnZS5mb3JFYWNoKG1zZyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdGVkLnNob3cobXNnLCB7IGNsYXNzTmFtZTogJ2JnLWRhbmdlcicgfSkKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuc2hvdyhyZXNwb25zZS5kYXRhLm1lc3NhZ2UsIHsKICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2JnLWRhbmdlcicKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiR0b2FzdGVkLnNob3coJ1NvbWV0aGluZyB3ZW50IHdyb25nJywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2JnLWRhbmdlcicKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KCgpID0+IGxvYWRlci5oaWRlKCkpCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ0ZFVENIX1VTRVJfREFUQScpLnRoZW4oKCkgPT4gewogICAgICBpZiAoIXRoaXMuJHN0b3JlLnN0YXRlLnVzZXIub25TZXNzaW9uKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoYC9zZXNzaW9uP2Zyb209L3RyYW5zYWN0aW9ucy8ke3RoaXMuaWR9Jm9uPXNpZ25pbmApCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kc3RvcmUKICAgICAgICAgIC5kaXNwYXRjaCgnR0VUX1RSQU5TQUNUSU9OX0RFVEFJTCcsIHRoaXMuaWQpCiAgICAgICAgICAudGhlbigoeyBkYXRhIH0pID0+IHsKICAgICAgICAgICAgdGhpcy50cmFuc2FjdGlvbiA9IGRhdGEuZGF0YQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCcvJykKICAgICAgICAgIH0pCiAgICAgIH0KICAgIH0pCiAgfQp9Cg=="},{"version":3,"sources":["TransactionDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TransactionDetail.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"mx-auto row w-100\" id=\"cart\" v-if=\"transaction\">\n      <div class=\"col-12 ml-md-5 text-center text-md-left\">\n        <div>\n          <p class=\"mb-0 text-muted\">\n            {{ transaction.updatedAt | formatDate }}\n          </p>\n          <h3>Total Price: {{ transaction.totalPrice | formatCurrency }}</h3>\n          <p>\n            Status:\n            {{\n              transaction.status[0].toUpperCase() + transaction.status.slice(1)\n            }}\n          </p>\n        </div>\n      </div>\n      <div\n        class=\"ml-0 ml-md-5 d-flex flex-wrap justify-content-center justify-content-md-start text-center w-100\"\n      >\n        <b-button\n          class=\"mx-3 my-2 my-sm-0\"\n          variant=\"outline-accent\"\n          size=\"lg\"\n          active-class\n          to=\"/transactions\"\n          >Back</b-button\n        >\n        <b-button\n          class=\"mx-2 my-2 my-sm-0\"\n          variant=\"primary\"\n          size=\"lg\"\n          v-if=\"transaction.status == 'delivering'\"\n          @click=\"delivered\"\n          >Confirm Delivered</b-button\n        >\n        <b-button\n          class=\"mx-2 my-2 my-sm-0\"\n          variant=\"outline-danger\"\n          size=\"lg\"\n          v-if=\"transaction.status == 'confirming'\"\n          @click=\"cancel\"\n          >Cancel Transaction</b-button\n        >\n      </div>\n      <div\n        class=\"item col-12 d-flex flex-column flex-md-row align-items-center justify-content-center justify-content-md-start my-3 rounded\"\n        v-for=\"item in transaction.items\"\n        :key=\"item.name\"\n      >\n        <b-img class=\"pt-2\" :src=\"item.image\" width=\"300\" fluid></b-img>\n        <div class=\"mt-2 mt-md-0 text-center text-sm-left\">\n          <h4 class=\"mb-0\">{{ item.name }}</h4>\n          <small class=\"text-muted\">\n            {{ item.amount }} pcs x\n            {{ item.price | formatCurrency }}\n          </small>\n          <h5 class=\"mt-4\">\n            {{ (item.price * item.amount) | formatCurrency }}\n          </h5>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: ['id'],\n  data() {\n    return {\n      transaction: null\n    }\n  },\n  methods: {\n    delivered() {\n      const loader = this.$loading.show()\n      this.$store\n        .dispatch('CONFIRM_DELIVERED', this.transaction._id)\n        .then(({ data }) => {\n          this.$toasted.show(data.message)\n          this.$router.push('/transactions')\n        })\n        .catch(({ response }) => {\n          this.password = ''\n          if (response) {\n            const message = response.data.message\n            if (typeof message != 'string') {\n              response.data.message.forEach(msg => {\n                this.$toasted.show(msg, { className: 'bg-danger' })\n              })\n            } else {\n              this.$toasted.show(response.data.message, {\n                className: 'bg-danger'\n              })\n            }\n          } else {\n            this.$toasted.show('Something went wrong', {\n              className: 'bg-danger'\n            })\n          }\n        })\n        .finally(() => loader.hide())\n    },\n    cancel() {\n      const loader = this.$loading.show()\n      this.$store\n        .dispatch('CANCEL_TRANSACTION', this.transaction._id)\n        .then(({ data }) => {\n          this.$toasted.show(data.message)\n          this.$router.push('/transactions')\n        })\n        .catch(({ response }) => {\n          this.password = ''\n          if (response) {\n            const message = response.data.message\n            if (typeof message != 'string') {\n              response.data.message.forEach(msg => {\n                this.$toasted.show(msg, { className: 'bg-danger' })\n              })\n            } else {\n              this.$toasted.show(response.data.message, {\n                className: 'bg-danger'\n              })\n            }\n          } else {\n            this.$toasted.show('Something went wrong', {\n              className: 'bg-danger'\n            })\n          }\n        })\n        .finally(() => loader.hide())\n    }\n  },\n  created() {\n    this.$store.dispatch('FETCH_USER_DATA').then(() => {\n      if (!this.$store.state.user.onSession) {\n        this.$router.replace(`/session?from=/transactions/${this.id}&on=signin`)\n      } else {\n        this.$store\n          .dispatch('GET_TRANSACTION_DETAIL', this.id)\n          .then(({ data }) => {\n            this.transaction = data.data\n          })\n          .catch(() => {\n            this.$router.replace('/')\n          })\n      }\n    })\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  height: 100%;\n  padding-top: 5.7rem;\n}\n</style>\n"]}]}