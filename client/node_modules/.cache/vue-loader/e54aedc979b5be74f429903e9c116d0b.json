{"remainingRequest":"/Users/aliftaufik/Documents/hacktiv8/hacktiv8-phase-2-repeat/portofolio/lazalopedia/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/aliftaufik/Documents/hacktiv8/hacktiv8-phase-2-repeat/portofolio/lazalopedia/client/src/views/Cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/aliftaufik/Documents/hacktiv8/hacktiv8-phase-2-repeat/portofolio/lazalopedia/client/src/views/Cart.vue","mtime":1576406925243},{"path":"/Users/aliftaufik/Documents/hacktiv8/hacktiv8-phase-2-repeat/portofolio/lazalopedia/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/aliftaufik/Documents/hacktiv8/hacktiv8-phase-2-repeat/portofolio/lazalopedia/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/aliftaufik/Documents/hacktiv8/hacktiv8-phase-2-repeat/portofolio/lazalopedia/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/aliftaufik/Documents/hacktiv8/hacktiv8-phase-2-repeat/portofolio/lazalopedia/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZmllbGRzOiBbCiAgICAgICAgewogICAgICAgICAga2V5OiAnbmFtZScsCiAgICAgICAgICBsYWJlbDogJ1Byb2R1Y3QgTmFtZScKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogJ3ByaWNlJywKICAgICAgICAgIGxhYmVsOiAnUHJvZHVjdCBQcmljZScKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogJ3F0eScsCiAgICAgICAgICBsYWJlbDogJ1FUWScKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGtleTogJ3RvdGFsJywKICAgICAgICAgIGxhYmVsOiAnVG90YWwnCiAgICAgICAgfQogICAgICBdLAogICAgICBjaGVja291dEhvdmVyOiBmYWxzZQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGl0ZW1zKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlci5jYXJ0Lml0ZW1zCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBmb3JtYXRDdXJyZW5jcnkodmFsdWUpIHsKICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuICcnCiAgICAgIHJldHVybiB2YWx1ZS50b0xvY2FsZVN0cmluZygnaWQnLCB7IHN0eWxlOiAnY3VycmVuY3knLCBjdXJyZW5jeTogJ0lEUicgfSkKICAgIH0sCiAgICBjaGVja291dENhcnQoKSB7CiAgICAgIGNvbnN0IGxvYWRlciA9IHRoaXMuJGxvYWRpbmcuc2hvdygpCiAgICAgIHRoaXMuJHN0b3JlCiAgICAgICAgLmRpc3BhdGNoKCdDSEVDS09VVF9UUkFOU0FDVElPTicpCiAgICAgICAgLnRoZW4oKHsgZGF0YSB9KSA9PiB7CiAgICAgICAgICB0aGlzLiR0b2FzdGVkLnNob3coZGF0YS5tZXNzYWdlKQogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy90cmFuc2FjdGlvbnMnKQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCh7IHJlc3BvbnNlIH0pID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZSkgewogICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlCiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPSAnc3RyaW5nJykgewogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEubWVzc2FnZS5mb3JFYWNoKG1zZyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdGVkLnNob3cobXNnLCB7IGNsYXNzTmFtZTogJ2JnLWRhbmdlcicgfSkKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuc2hvdyhyZXNwb25zZS5kYXRhLm1lc3NhZ2UsIHsKICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2JnLWRhbmdlcicKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiR0b2FzdGVkLnNob3coJ1NvbWV0aGluZyB3ZW50IHdyb25nJywgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2JnLWRhbmdlcicKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KCgpID0+IGxvYWRlci5oaWRlKCkpCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ0ZFVENIX1VTRVJfREFUQScpLnRoZW4oKCkgPT4gewogICAgICBpZiAoIXRoaXMuJHN0b3JlLnN0YXRlLnVzZXIub25TZXNzaW9uKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoJy9zZXNzaW9uP2Zyb209L2NhcnQmb249c2lnbmluJykKICAgICAgfQogICAgfSkKICB9Cn0K"},{"version":3,"sources":["Cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Cart.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"mx-auto text-center\">\n      <b-button\n        class=\"px-5\"\n        variant=\"outline-primary\"\n        size=\"lg\"\n        @mouseenter=\"checkoutHover = true\"\n        @mouseleave=\"checkoutHover = false\"\n        @click=\"checkoutCart\"\n        v-if=\"items\"\n      >\n        {{\n          checkoutHover\n            ? 'Checkout'\n            : `Total: ${formatCurrencry(\n                items\n                  .map(item => item.item.price * item.amount)\n                  .reduce((r, i) => r + i)\n              )}`\n        }}\n      </b-button>\n    </div>\n    <div class=\"mx-auto row w-100\" id=\"cart\">\n      <router-link\n        tag=\"div\"\n        class=\"item col-12 d-flex flex-column flex-md-row align-items-center justify-content-center justify-content-md-start my-3 rounded\"\n        v-for=\"item in items\"\n        :key=\"item.item._id\"\n        :to=\"`/items/${item.item._id}`\"\n      >\n        <!-- <figure class=\"border flex-shrink-1\"> -->\n        <b-img class=\"pt-2\" :src=\"item.item.image\" width=\"300\" fluid></b-img>\n        <!-- </figure> -->\n        <div class=\"mt-2 mt-md-0 text-center text-sm-left\">\n          <h4 class=\"mb-0\">{{ item.item.name }}</h4>\n          <small class=\"text-muted\">\n            {{ item.amount }} pcs x\n            {{ item.item.price | formatCurrency }}\n          </small>\n          <h5 class=\"mt-4\">\n            {{ (item.item.price * item.amount) | formatCurrency }}\n          </h5>\n        </div>\n      </router-link>\n    </div>\n    <!-- <table class=\"table table-hover table-borderless \">\n      <thead class=\"thead-dark\">\n        <tr>\n          <th v-for=\"field in fields\" :key=\"field.key\">{{ field.label }}</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"item in items\" :key=\"item.item._id\">\n          <td>\n            <img :src=\"item.item.image\" width=\"200px\" :alt=\"item.item.name\" />\n          </td>\n          <td>{{ item.item.name }}</td>\n          <td>{{ item.item.price | formatCurrency }}</td>\n          <td>{{ item.amount }}</td>\n          <td>{{ (item.item.price * item.amount) | formatCurrency }}</td>\n        </tr>\n      </tbody>\n    </table>-->\n    <!-- <b-table striped hover :fields=\"fields\" :items=\"items\">\n      <template v-slot:cell(name)=\"data\">\n        {{ data.item.item.name }}\n      </template>\n      <template v-slot:cell(price)=\"data\">\n        {{ data.item.item.price | formatCurrency }}\n      </template>\n      <template v-slot:cell(qty)=\"data\">\n        {{ data.item.amount }}\n      </template>\n      <template v-slot:cell(total)=\"data\">\n        {{ (data.item.item.price * data.item.amount) | formatCurrency }}\n      </template>\n    </b-table>-->\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      fields: [\n        {\n          key: 'name',\n          label: 'Product Name'\n        },\n        {\n          key: 'price',\n          label: 'Product Price'\n        },\n        {\n          key: 'qty',\n          label: 'QTY'\n        },\n        {\n          key: 'total',\n          label: 'Total'\n        }\n      ],\n      checkoutHover: false\n    }\n  },\n  computed: {\n    items() {\n      return this.$store.state.user.cart.items\n    }\n  },\n  methods: {\n    formatCurrencry(value) {\n      if (!value) return ''\n      return value.toLocaleString('id', { style: 'currency', currency: 'IDR' })\n    },\n    checkoutCart() {\n      const loader = this.$loading.show()\n      this.$store\n        .dispatch('CHECKOUT_TRANSACTION')\n        .then(({ data }) => {\n          this.$toasted.show(data.message)\n          this.$router.push('/transactions')\n        })\n        .catch(({ response }) => {\n          if (response) {\n            const message = response.data.message\n            if (typeof message != 'string') {\n              response.data.message.forEach(msg => {\n                this.$toasted.show(msg, { className: 'bg-danger' })\n              })\n            } else {\n              this.$toasted.show(response.data.message, {\n                className: 'bg-danger'\n              })\n            }\n          } else {\n            this.$toasted.show('Something went wrong', {\n              className: 'bg-danger'\n            })\n          }\n        })\n        .finally(() => loader.hide())\n    }\n  },\n  created() {\n    this.$store.dispatch('FETCH_USER_DATA').then(() => {\n      if (!this.$store.state.user.onSession) {\n        this.$router.replace('/session?from=/cart&on=signin')\n      }\n    })\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  min-height: 100%;\n  padding-top: 5.7rem;\n\n  #cart {\n    .item {\n      cursor: pointer;\n      border: 1px solid transparent;\n\n      &:hover {\n        border: 1px solid #e3e6ea;\n        box-shadow: 1px 1px 5px -3px var(--accent);\n      }\n    }\n\n    // tbody {\n    //   cursor: pointer !important;\n    // }\n  }\n}\n</style>\n"]}]}